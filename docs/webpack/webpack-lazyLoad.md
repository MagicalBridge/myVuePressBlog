---
sidebar: auto
---

# webpack懒加载

## 我们为什么需要懒加载
当页面中一个文件过大并且还不一定用的到的时候，我们希望在使用的时候才加载，这就是按需加载，也就是懒加载。

要实现按需加载，我们一般的想到的方法：动创建 script 标签，并将src属性指向对应的文件路径。但是实现过程中会存在一些问题：
- 怎么保证相同的文件只加载了一次
- 怎么判断文件的加载完成
- 文件加载完成之后，怎么通知所有引入文件的地方?

当涉及到动态代码拆分时，webpack 提供了两个类似的技术。对于动态导入:
- 第一种，也是优先选择的方式是，使用符合 ECMAScript 提案 的 import() 语法。
- 第二种，则是使用 webpack 特定的 require.ensure。

## 懒加载的基本流程：
- 触发异步加载逻辑
- 加载包含额外代码块的模块定义的js文件
- js文件加载回来之后js脚本会执行
- 把新的模块定义合并到老的模块定义上
- 走正常的加载逻辑。




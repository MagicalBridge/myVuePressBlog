(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{373:function(s,a,e){s.exports=e.p+"assets/img/05.c4971390.jpg"},374:function(s,a,e){s.exports=e.p+"assets/img/01.fb31894c.png"},375:function(s,a,e){s.exports=e.p+"assets/img/02.74580573.png"},376:function(s,a,e){s.exports=e.p+"assets/img/03.954f29da.png"},377:function(s,a,e){s.exports=e.p+"assets/img/04.b0d8ec4c.png"},378:function(s,a,e){s.exports=e.p+"assets/img/06.dedf68c3.png"},437:function(s,a,e){"use strict";e.r(a);var n=e(44),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),n("h2",{attrs:{id:"什么是docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker"}},[s._v("#")]),s._v(" 什么是Docker")]),s._v(" "),n("p",[s._v("Docker 是一个开源的应用容器引擎。开发者可以将自己的应用打包在自己的镜像里面，然后迁移到其他平台的 Docker 中。镜像中可以存放你自己自定义的运行环境，文件，代码，设置等等内容，再也不用担心环境造成的运行问题。镜像共享运行机器的系统内核。")]),s._v(" "),n("p",[s._v("同样， Docker 也支持跨平台。你的镜像也可以加载在 Windows 和 Linux，实现快速运行和部署。")]),s._v(" "),n("h2",{attrs:{id:"docker解决了什么问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker解决了什么问题"}},[s._v("#")]),s._v(" Docker解决了什么问题")]),s._v(" "),n("p",[s._v("一句话，解决了运行环境和配置问题的"),n("strong",[s._v("软件容器")]),s._v("，方便于持续集成并有助于整体发布推动软件虚拟化技术。")]),s._v(" "),n("h2",{attrs:{id:"docker三要素"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker三要素"}},[s._v("#")]),s._v(" Docker三要素")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("镜像 (image)")]),s._v(":")])]),s._v(" "),n("p",[s._v("Docker镜像就是一个"),n("strong",[s._v("只读")]),s._v("的模板，镜像可以用来创建docker容器，一个镜像可以创建很多容器。**镜像其实是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，**它包含运行某个软件所需要的所有内容，包括代码、运行时、库、环境和配置文件。")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("容器（Container）")])])]),s._v(" "),n("p",[s._v("Docker利用容器（Container）独立运行的一个或者一组应用，容器是用镜像创建爱你的运行实例。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证平台的安全。可以把容器看成是一个简单的Linux环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。容器的定义几乎和镜像一模一样，也是一堆层的统一视角，唯一区别在于容器的最上面那一层是可读可写的。")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("仓库")])])]),s._v(" "),n("p",[s._v("是集中存放镜像的地方,我们可以把镜像发布到仓储中，需要的时候从仓储中拉取下来就可以了。")]),s._v(" "),n("h2",{attrs:{id:"docker架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker架构"}},[s._v("#")]),s._v(" Docker架构")]),s._v(" "),n("p",[n("img",{attrs:{src:e(373),alt:"docker架构"}})]),s._v(" "),n("h2",{attrs:{id:"docker安装-centos7"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-centos7"}},[s._v("#")]),s._v(" Docker安装 (CentOS7)")]),s._v(" "),n("p",[s._v("在Docker安装之前，我们首先安装"),n("code",[s._v("device-mapper-persistent-data")]),s._v(" 和 "),n("code",[s._v("lvm2")]),s._v(" 两个依赖。")]),s._v(" "),n("p",[n("code",[s._v("device-mapper-persistent-data")]),s._v(" 是 "),n("code",[s._v("Lunix")]),s._v("下的一个存储驱动，Linux 上的高级存储技术。")]),s._v(" "),n("p",[n("code",[s._v("lvm2")]),s._v(" 的作用是创建逻辑磁盘分区，这里我们使用CentOS的Yum包管理工具安装两个依赖。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(374),alt:"前置依赖"}})]),s._v(" "),n("p",[s._v("依赖安装完毕后，我们将阿里云的 Docker 镜像源添加进去。可以加速 Docker 的安装。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("最后安装 docker")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(375),alt:"docker安装完毕"}})]),s._v(" "),n("p",[s._v("接着执行一下 "),n("code",[s._v("docker -v")]),s._v(" ，这条命令可以用来查看 Docker 安装的版本信息。当然也可以帮助我们查看 docker 安装状态。如果正常展示版本信息，代表 Docker 已经安装成功。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker -v\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(376),alt:"验证版本"}})]),s._v(" "),n("h2",{attrs:{id:"docker安装-hello-world镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-hello-world镜像"}},[s._v("#")]),s._v(" Docker安装 hello-world镜像")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker run hello-world\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(377),alt:"hello-world"}})]),s._v(" "),n("p",[s._v("从图中展示的信息可以看到，在执行run命令的时候，首先会从本地查找镜像，发现在本地没有找到，就去仓库中寻找，下载之后，基于这个镜像创建一个容器。")]),s._v(" "),n("h2",{attrs:{id:"docker镜像常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像常用命令"}},[s._v("#")]),s._v(" Docker镜像常用命令")]),s._v(" "),n("p",[s._v("帮助命令")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 帮助命令")]),s._v("\ndocker --help\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("列出本地主机上的所有镜像")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出本地主机上的所有镜像")]),s._v("\ndocker images\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("img",{attrs:{src:e(378),alt:"镜像"}})]),s._v(" "),n("p",[s._v("各个选项说明:")]),s._v(" "),n("ul",[n("li",[s._v("REPOSITORY: 表示镜像仓库")]),s._v(" "),n("li",[s._v("TAG: 镜像标签")]),s._v(" "),n("li",[s._v("IMAGE ID: 镜像id")]),s._v(" "),n("li",[s._v("CREATED: 镜像创建时间")]),s._v(" "),n("li",[s._v("SIZE: 镜像大小")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("同一个仓库可以有多个TAG，代表这个仓库源的不同个版本，我们使用"),n("code",[s._v("REPOSITORY:TAG")]),s._v(" 来定义不同的镜像。如果你不指定一个镜像的版本标签，将默认是使用最新的版本。")])]),s._v(" "),n("p",[s._v("当然 docker images 后面还可以添加 options 参数：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker images -a // 显示全部镜像，镜像是分层的\ndocker images -q // 只显示镜像的 images "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\ndocker search xxx // 从dockerhub 中查找指定名称的镜像\ndocker search -s "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" xxx // 查找指定镜像在一定star数量之上的\ndocker pull xxx // 拉取指定名称的镜像 注意默认拉取的是最新的版本的镜像\ndocker rmi  xxx // 删除指定镜像 如果不添加任何标签默认删除最新版本的镜像\ndocker rmi -f xxx // 强制删除指定镜像\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("如果我想要搜索 mongo 数据库，\b可以执行命令：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker search mongo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果我想拉取 mongo和centos镜像，可以执行命令:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认拉取最新版本的镜像")]),s._v("\ndocker pull mongo\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取centos最新版本的镜像")]),s._v("\ndocker pull centos\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取指定版本的镜像(后面使用冒号指定版本号)")]),s._v("\ndocker pull mongo:3.4.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("如果我想要删除 hello-world 这个镜像，可以执行命令：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker rmi hello-world\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"docker容器常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker容器常用命令"}},[s._v("#")]),s._v(" Docker容器常用命令")]),s._v(" "),n("h3",{attrs:{id:"新建并启动容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新建并启动容器"}},[s._v("#")]),s._v(" 新建并启动容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("options说明：\n--name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"容器新名字"')]),s._v("：为容器指定一个名称\n-d: 后台运行容器，并返回容器ID\n-i: 以交互模式运行容器，通常与 -t 同时使用\n-t: 为容器分配一个伪输入终端，通常与 -i 同时使用\n-P: 随机端口映射\n-p: 指定端口映射，有以下四种格式\n  ip:hostPort: containerPort\n  ip::containerPort\n  hostPort: containerPort\n  containerPort\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"列出当前所有正在运行的容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#列出当前所有正在运行的容器"}},[s._v("#")]),s._v(" 列出当前所有"),n("strong",[s._v("正在运行")]),s._v("的容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示出当前我的服务器中启动的所有的容器")]),s._v("\n$ docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS        PORTS                      NAMES\n0c1c8d14921b   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours ago   Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("当然这个命令也是可以添加options的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-a 列出当前所有正在运行的容器 + 历史上运行过的\n-l 显示最近创建的容器\n-n 显示最近n个创建的容器\n-q 静默模式，只显示容器编号\n--no-trunc 不截断输出\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("docker ps -a")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\nCONTAINER ID   IMAGE                     COMMAND                  CREATED             STATUS                         PORTS                      NAMES\nea1732dfe8de   centos                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago      Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago                                 mycentos\n3fe4caec1b0a   nginx                     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" minutes ago      Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" minutes ago                                 my-nginx\nebb4102ec952   nginx                     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   About an hour ago   Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" About an hour ago                              nginx-server\n0c1c8d14921b   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours ago        Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n0ffe03ebfdeb   hello-world               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago        Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago                                   sad_jackson\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"启动容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首先启动容器 进入交互式命令")]),s._v("\n$ docker run  -it --name mycentos centos\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@941b40fa94aa /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出交互式命令")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@941b40fa94aa /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出容器之后，想要查看上一个刚退出的容器，可以看到，上次启动的是 mycentos ")]),s._v("\n$ docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -l\nCONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                          PORTS     NAMES\n941b40fa94aa   centos    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago   Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" About a minute ago             mycentos\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("有时候，我们并不想使用交互式启动命令的方式，只想启动之后让它在后台运行，这个时候我们可以添加 -d 这个选项")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我想要后台运行 centos 可以执行下面的命令")]),s._v("\n$ docker run -d centos\n9a52cdc137ef7e2efef6919a5e296b555baf5524f1a1d82170f1c9c28b1e7a31\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("此时执行 docker ps 这个命令是查找不出来这个后台运行的容器的。执行 docker ps -a 是能够显示出来这个容器的，但是状态是退出的状态：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\nCONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS                     PORTS                      NAMES\n9a52cdc137ef   centos                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes ago   Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" minutes ago                              dazzling_clarke\n0c1c8d14921b   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago       Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days                  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up About an hour           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" hours                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" hours                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n0ffe03ebfdeb   hello-world               "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago     Exited "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago                               sad_jackson\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("blockquote",[n("p",[s._v("docker 容器的后台运行, 就必须有一个前台进程，容器运行的命令如果不是那些一直挂起的命令，就是会自动退出的。这个是docker的运行机制问题。")])]),s._v(" "),n("h3",{attrs:{id:"重启容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#重启容器"}},[s._v("#")]),s._v(" 重启容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker restart 容器id 或者容器名称")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 比如我想重新启动easymock这个容器，可以执行命令")]),s._v("\ndocker restart  c9693a7fa9dd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令行返回 c9693a7fa9dd 说明重启成功")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"停止容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[s._v("#")]),s._v(" 停止容器")]),s._v(" "),n("p",[s._v("docker stop  容器ID")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("docker stop  c9693a7fa9dd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"强制停止容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#强制停止容器"}},[s._v("#")]),s._v(" 强制停止容器")]),s._v(" "),n("p",[s._v("docker kill 容器ID")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制停止容器 c9693a7fa9dd")]),s._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" c9693a7fa9dd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"删除已经停止的容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除已经停止的容器"}},[s._v("#")]),s._v(" 删除已经停止的容器")]),s._v(" "),n("p",[s._v("docker rm 容器ID")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除已经停止掉的容器 c9693a7fa9dd")]),s._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" c9693a7fa9dd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"查看容器内部细节"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看容器内部细节"}},[s._v("#")]),s._v(" 查看容器内部细节")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器其实是一层一层的，这个命令可以显示内部的细节")]),s._v("\ndocker inspect c9693a7fa9dd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);
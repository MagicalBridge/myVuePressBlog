---
sidebar: auto
---

# 栈

## 栈：后入先出的数据结构
栈是一种遵从后进先出（LIFO）原则的有序集合。**新添加或者待删除**的元素都保存在栈的同一端，称作栈顶，另一端就叫栈底。在栈里，新的元素都靠近栈顶，旧元素都接近栈底。

在现实生活中，一摞书或者餐厅里面叠放的盘子都是栈的应用场景。

栈也被用在编程语言的编译器和内存中保存变量、方法调用等，也被用于浏览器历史记录（浏览器的返回按钮）。

### 一：创建一个基于数组的栈

创建一个类来表示栈
```js {3}
class Stack {
  constructor() {
    this.items = [];
  }
}
```

我们需要一种数据结构来保存栈里的元素, 我们选择数组, 数组允许我们在任何位置添加或者删除元素。由于栈遵循LIFO原则，需要对元素的插入和删除功能进行限制，我们需要声明一些方法。

- push(element): 添加一个（或者几个）新元素到栈顶。
- pop(): 移除栈顶的元素，同时返回被移除的元素。
- peek(): 返回栈顶的元素，不对栈做任何修改（该方法不会移除栈顶的元素，仅仅返回它）。
- isEmpty(): 如果栈里面没有任何元素返回true，否则返回false。
- clear(): 移除栈里面的所有元素
- size(): 返回栈里面的元素个数，该方法和数组的length属性很类似。

### 向栈添加元素

我们要实现的第一个方法是push，该方法负责往栈里面添加新的元素，有一点很重要：该方法只添加元素到栈顶，也就是栈的末尾，push方法可以如下这样写。
```js
push(element) {
  this.items.push(element);
}
```

### 从栈移除元素

接着我们来实现pop方法，该方法主要用来移除栈里的元素。栈遵从LIFO原则，因此移出的是最后添加进去的元素。因此，我们可以利用数组的pop方法。

```js
pop() {
  return this.items.pop();
}
```
只能用push 和 pop 方法添加和删除栈中元素，这样一来，我们的栈自然就遵从了LIFO原则。

### 查看栈顶元素

我们实现一些额外的辅助方法，如果想要知道栈里面最后添加的元素是什么，可以使用peek方法。这个方法将返回栈顶的元素。

```js
peek() {
  return this.items[this.items.length-1]
}
```

因为类内部是使用的数组保存的元素，所以访问数组的最后一个元素可以用 length-1。

### 检查栈是否为空

下面我们要实现的方法是isEmpty，如果栈为空的话将返回 true，否则就返回false。

```js
isEmpty(){
  return this.items.length === 0;
}
```
使用isEmpty方法，我们能简单地判断内部数组的长度是否为0。

类似于数组的length属性，我们也能实现栈的length。对于集合，最好用size代替length。因为栈的内部使用数组保存元素，所以能简单地返回栈的长度。

```js
size() {
  return this.items.length;
}
```

### 清空栈元素
最后，我们来实现clear方法。clear方法用来移除栈里所有的元素，把栈清空。实现该方法最简单的方式如下。

```js
clear() {
  this.items = [];
}
```

完成了！栈已经实现。

### 使用Stack类

首先，我们需要初始化Stack类，然后验证一下栈是否为空

```js
const stack = new Stack();
console.log(stack.isEmpty()) // 输出为true
```

接着，往栈中添加一些元素（这里我们添加数字5和8；你可以添加任意类型的元素）。

```js
stack.push(5)
stack.push(8)
```

如果使用peek方法，将输出8，因为它是往栈里面添加的最后一个元素

```js
console.log(stack.peek()); // 输出8
```

再添加一个元素

```js
stack.push(11)
console.log(stack.size()) // 输出3
console.log(stack.isEmpty()) // 输出 false
```

我们往栈里添加了11。如果调用size方法，输出为3，因为栈里有三个元素（5、8和11）。如果我们调用isEmpty方法，会看到输出了false（因为栈里有三个元素，不是空栈）。最后，我们再添加一个元素。


```js
stack.push(15);
```

下图描绘了目前为止我们对栈的操作，以及栈的当前状态。

![操作](../images/dataStructure/stack/01.png)

然后，调用两次pop方法从栈里移除两个元素。

```js
stack.pop();
stack.pop();
console.log(stack.size()) // 输出2
```

在两次调用pop方法前，我们的栈里有四个元素。调用两次后，现在栈里仅剩下5和8了。下图描绘了这个执行过程。

![操作](../images/dataStructure/stack/02.png)


### 二：创建一个基于JavaScript对象的Stack类

创建一个Stack类最简答的方式就是使用一个数组来存储元素。在处理大量数据的时候，我们同样需要评估如何操作数据是最高效的。

在使用数组时，大部分方法的时间复杂度是O(n), 如果我们能直接获取元素，占用较少的内存空间，并且仍然保证所有元素按照我们的需要排列，我们也可以使用一个JavaScript对象来存储所有的栈元素，保证它们的顺序并且遵循LIFO原则。


---
sidebar: auto
---

# Lunix

## Linux的概述：

先了解下Unix

Unix是一个强大的多用户、多任务操作系统。于1969年在AT&T的贝尔实验室开发。UNIX的商标权由国际开放标准组织（The Open Group）所拥有。UNIX操作系统是商业版，需要收费，价格比Microsoft Windows正版要贵一些。

Linux的概述：

Linux是基于Unix的Linux是一种自由和开放源码的操作系统，存在着许多不同的Linux版本，但它们都使用了Linux内核。Linux可安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、台式计算机

诞生于1991 年10 月5 日。是由芬兰赫尔辛基大学学生Linus Torvalds和后来加入的众多爱好者共同开发完成。

## 目录规范
- bin 存放的是二进制的命令目录
- sbin 系统级别的二进制目录
- lib 当前的库目录 等同于win上面的system32目录
- lib64 64位比较特殊的库文件
- boot 引导分区目录
- dev 设备目录 linux中把硬件也当成文件处理 一切皆文件
- etc 主要放置配置文件 一般来说，安装数据库的配置文件就会放在这里
- opt 第三方软件的存放目录，约定俗成
- media 可识别媒体设备
- mnt 和media差不多
- proc 进程目录，系统的进程的映射
- sys 存放系统硬件信息
- tmp 临时存放目录
- var 一般存放一些日志文件
- home 普通用户的家目录 可以操作

## vim的操作使用
![vim的操作模式](../images/linux/01.png)

### 操作：删除、复制、粘贴
  
在一般模式下，`yy`命令就是复制的命令，`p`是粘贴的命令, `u`是撤销的命令。`dd` 是删除的命令

**复制多行**：复制的时候可能会有复制多行的需求，这个时候就需要在yy前面加上数字，比如`6yy`代表的是同时复制6行。

**复制光标到结束**：有时候我们并不想复制整行的文本，而是想复制一行中的某一部分，这个时候我们首先按下y,然后再按下$符号，这样就能复制从光标开始到后面的部分。

**复制光标到开头**：同样的，^在计算机系统中表示的是开头的意思，配合着y可以做到复制光标到开头的部分。

**复制某一个单词**：如果想要复制某一个单词，我们可以使用w配合y进行操作，这里的w代表的是world的意思。

粘贴的时候会在**光标**的下一行进行粘贴，5pp 这个命令的意思是 粘贴5行。

如果想要删除光标下面的好几行需要在dd前面添加一个数字： 3dd 这就代表删除多行。

**删除某一个单词**：删除某一个单词需要d配合w来操作，这样就能实现，删除光标后面的部分。

**剪切操作**： 如果想要做类似于那种剪切的操作，有两种模式模式，一种是x(小写的x),这种方式是删除光标当前的位置，一种是X，删除光标之前的位置。

**快速移动**：有时候，我们期望能够快速的移动到行尾，或者行头，这个时候可以使用 `shift + ($)` 或者 `shift + (^)`来操作。

**快速跳转到当前词的词尾部**：如果我们想要跳转到当前词的词尾部，可以使用e这个词来控制。

**快速跳转到当前词的词头部**：如果我们想要跳转到当前词的词头部，可以使用b这个词来控制。

**快速跳转到整篇文档的开头**：我们可以使用g这个小写字母来操作

**快速跳转到整篇文档的末尾**：我们可以使用G这个大写字母来操作，或者使用大写L来进行操作。

想要跳转到指定的行号，我们需要借助一个命令，需要在编辑模式下使用，`set nu`, 这样就进入了编辑模式，进去然后，输入行号，再按`shift + g`,就能跳转到指定的行号。

### 编辑模式下的操作
进入编辑模式除了按住i这个小写字母之外，还可以按住o这个小写字母。i的插入操作是在当前光标处插入数据，o的话是在光标下一行插入数据。

### 命令模式下的常用操作
- :w 保存
- :q 退出
- :wq 保存并退出 有时候也会加上!,意思是对于一些制度文件也支持保存。
- :q! 不保存，强制退出
- :set nu 显示行号
- :set nonu 关闭行号
- :noh 取消高亮显示
- /xxx 按下回车之后，就可以在文档中查找所有的单词, 这个时候按下n就可以定位到单词之中。如果想要向上查找，就使用N。
- :s/old/new 替换当前行匹配到的第一个old为new
- :s/old/new/g 替换当前行匹配到的所有old为new

## Linux的系统管理

### 查看防火墙状态
systemctl status firewalld 

我在阿里云服务器上输入命令,会输出下面的
```
firewalld.service - firewalld - dynamic firewall daemon
  Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor >
  Active: inactive (dead)
  Docs: man:firewalld(1)
```

这个命令是关于firewalld服务的系统服务单元文件的输出。firewalld是一个动态防火墙管理工具，它用于管理Linux系统上的防火墙规则和网络连接。根据输出信息：

- `Loaded` 行指示firewalld服务单元文件的位置：`/usr/lib/systemd/system/firewalld.service`。
- `Active` 行指示firewalld服务当前的状态为`inactive (dead)`，表示该服务当前处于非活动状态且已停止。
- `Docs` 行提供了有关firewalld命令的man页文档的参考信息：`man:firewalld(1)`。

根据这些信息，你的阿里云服务器上并未启用firewalld服务，因此该服务当前处于停止状态。如果你希望启用该服务并配置防火墙规则，请参考相关文档或咨询阿里云服务器的支持。

### 临时关闭防火墙
systemctl stop firewalld

### 查看防火墙开机启动状态
enable firewalld.service

### 设置开机时关闭防火墙
systemctl disable firewalld.service



## Linux的常用命令
Shell 可以看作是一个命令解释器，为我们提供了交互式的文本控制台界面。我们可以 通过终端控制台来输入命令，由 shell 进行解释并最终交给内核执行。 本章就将分类介绍 常用的基本 shell 命令。

当我登录阿里云服务器显示如下信息：
```js
root @ iZuf6j0zu9bm2b8n7do53iZ in ~
```
- root 当前登录的用户
- @iZuf6j0zu9bm2b8n7do53iZ 主机名
- ~ 当前工作目录,默认是当前用户的家目录，root就是/root

### man: 获取帮助信息
- man [命令或者配置文件]
- man ls 查看ls命令的帮助信息

### cd：切换目录
- cd - 直接跳转到上一次的目录，这个命令在两个文件目录间隔比较远的时候用处很大

### ls: 查询目录中的内容
- ls [选项] [文件或者目录]
  -a 显示所有文件，包括隐藏文件
  -l 显示详细信息
  -h 人性化的方式显示文件大小
  -i 显示inode,也就是i节点，每个节点都有ID号

### mkdir: 创建目录
- mkdir -p [目录名称] 这里的-p代表递归创建

### pwd: 打印当前的路径

### rmdir：删除空目录
- rmdir [目录名] 如果目录里面包含内容删除的时候会报错

### rm -rf [文件或者目录]: 递归强制删除所有目录
- rm -rf node_modules 删除目录

### cp:复制命令
- -a 比较全能的命令 可以复制目录、文件 可以连带复制属性 还可以复制链接属性

### mv 重命名一个文件或者移动: 
- 同级目录下就是改名，不是同级目录就是移动
```sh
# $mv sourcename  targetname
# 创建一个文件夹, 命名为 ny-nginx 突然发现是写错了
$mkdir ny-nginx
# 修改文件名称 改为 my-nginx
$mv ny-nginx my-nginx 
```


## scp 跨机远程拷贝

scp是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，不过cp只是在本机进行拷贝不能跨服务器，而且scp传输是加密的。当你服务器硬盘变为只读 read only system时，用scp可以帮你把文件移出来。

> 类似的工具有rsync；scp消耗资源少，不会提高多少系统负荷，在这一点上，rsync就远远不及它了。rsync比scp会快一点，但当小文件多的情况下，rsync会导致硬盘I/O非常高，而scp基本不影响系统正常使用。

### 命令格式
```sh
$scp [参数] [原路径] [目标路径]
```

### 使用示例

#### 1、从远处复制文件到本地目录
```sh
$scp root@10.6.159.147:/opt/soft/demo.tar /opt/soft/
```

说明： 从10.6.159.147机器上的/opt/soft/的目录中下载demo.tar 文件到本地/opt/soft/目录中

#### 2、从远处复制到本地
```sh
$scp -r root@10.6.159.147:/opt/soft/test /opt/soft/
```
说明： 从10.6.159.147机器上的/opt/soft/中下载test目录到本地的/opt/soft/目录来。

#### 3、上传本地文件到远程机器指定目录
```sh
$scp /opt/soft/demo.tar root@10.6.159.147:/opt/soft/scptest
```
说明： 复制本地opt/soft/目录下的文件demo.tar 到远程机器10.6.159.147的opt/soft/scptest目录

#### 4、上传本地目录到远程机器指定目录
```sh
$scp -r /opt/soft/test root@10.6.159.147:/opt/soft/scptest
```
说明： 上传本地目录 /opt/soft/test到远程机器10.6.159.147上/opt/soft/scptest的目录中

